<!doctype>
<html>
<head>
  <link rel="stylesheet" href="leaflet.min.css"/>
  <style>
    #map { 
      width: 100%;
      height: 180px; 
    }
  </style>
</head>

<body>

  <div id="map"></div>

  <script src="head.load.min.js"></script>
  <script>
    head
    .js("leaflet.min.js")
    .ready(function(){

      // create a map in the "map" div, set the view to a given place and zoom
      map = L.map('map', {
        zoomControl: false, //removendo controle de zoom
        attributionControl: false //removendo informações do Leaflet
      })
      .setView([-21.244722,-45.000429], 15);

      L.control.zoom({
        position: 'bottomright' //adicionando o controle de zoom na parte inferior direita do mapa
      }).addTo(map);

      // add a CloudMade tile layer with style #997
      L.tileLayer('http://{s}.tile.cloudmade.com/{key}/997/256/{z}/{x}/{y}.png', {
          key: '4545df0a35ca4aa1bbf2afaab46c68e0',
          attribution: '',
          maxZoom: 18
      }).addTo(map);

      /************
      * Mobile
      *************/
      /* map.on('locationfound', function(e){
        var radius = e.accuracy / 2;
        L.marker(e.latlng).addTo(map)
          .bindPopup("Você está em um raio de " + radius + " metros desse ponto").openPopup();

        L.circle(e.latlng, radius).addTo(map);
      });

      map.on('locationerror', function onLocationError(e) {
        alert(e.message);
      });

      map.locate({setView: true, maxZoom: 16}); */
      /************
      * FIM Mobile
      *************/

      // add a marker in the given location, attach some popup content to it and open the popup
      L.marker([-21.244722,-45.000429])
      .on('click', function(event){
        console.warn(event);
      })
      .addTo(map)
      .bindPopup('A pretty CSS3 popup. <br> Easily customizable.').openPopup();

      
      /************
      * GeoJSON
      *************/
      var geojsonFeature = {
        "type": "Feature",
        "properties": {
          "name": "Coors Field",
          "amenity": "Baseball Stadium",
          "popupContent": "This is where the Rockies play!"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [-45.001266, -21.244702]
        },
        "id": 1
      };
      L.geoJson(geojsonFeature, {
        style: {
          "color": "#dd0000",
          "weight": 4,
          "opacity": 0.80
        },
        pointToLayer: function (feature, latlng) {
          return L.circleMarker(latlng, {
            radius: 8,
            fillColor: "#ff7800",
            color: "#000",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
          })
        }
      }).addTo(map);
      /************
      * FIM GeoJSON
      *************/
      

    })
    ;
  </script>
</body>
</html>
